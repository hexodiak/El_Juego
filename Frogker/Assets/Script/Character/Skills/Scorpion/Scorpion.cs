using System;
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Scorpion : MonoBehaviour
{
    public GameObject attackPrefab; // Prefab
    float attackOffset = 5f; // Distancia delante del personaje

    public int damage = 5;
    public float lifetime = .2f; // Destruir el proyectil después de 3 segundos

    void Update()
    {
        //Destroy(attackPrefab, lifetime);
        StartCoroutine(Espera());
    }
    IEnumerator Espera()
    {
        yield return new WaitForSeconds(lifetime);
        try
        {
            DestroyImmediate(attackPrefab, true);
        }
        catch (Exception ex)
        {
            // Manejo del error
            Debug.Log("controlado borrado de scorpio");
        }
        
    }
    public void Attack()
    {
        // Determinar la dirección del personaje
        float direction = Mathf.Sign(transform.localScale.x); // 1 si mira a la derecha, -1 si mira a la izquierda
        
        // Calcular la posición donde se creará el ataque (basado en la posición del personaje)
        Vector2 spawnPosition = new Vector2(transform.position.x + attackOffset * direction, transform.position.y);

        // Instanciar el ataque en la nueva posición
        Instantiate(attackPrefab, spawnPosition, Quaternion.identity);
    }



}
